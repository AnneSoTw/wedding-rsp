<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding RSVP</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="rsvp-container">
    <div class="language-selector-dropdown">
      <select id="languageSelect" class="lang-button">
        <option value="en" id="langEn">ğŸ‡ºğŸ‡¸ English</option>
        <option value="zh" id="langZh">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
        <option value="fr" id="langFr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
      </select>
    </div>

        <header id="rsvpHeader">
            <h1 class="romantic-font" data-translate="headerTitle">Our Wedding 2</h1>
            <img src="https://placehold.co/300x200/f5f0e8/5d4037?text=Our+Photo" alt="Couple" id="weddingImage" class="wedding-image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/f5f0e8/5d4037?text=Image+Not+Found';">
            <p data-translate="headerDescription">Join us to celebrate our special day! Please RSVP by [Your RSVP Date].</p>
        </header>

        <!-- Page 1: Initial Info -->
        <div id="page1" class="form-page">
            <h2 data-translate="page1Title">Guest Information</h2>
            <div class="form-group">
                <label data-translate="guestSideLabel">Are you a guest of the:</label>
                <div class="radio-group">
                    <button class="choice-button" data-value="groom" name="guestSide" data-translate="guestSideGroom"></button>
                    <button class="choice-button" data-value="bride" name="guestSide" data-translate="guestSideBride"></button>
                </div>
                <input type="hidden" id="guestSide" name="guestSideInput">
            </div>
            <div class="form-group">
                <label for="chineseName">
                   <span class="label-text"  data-translate="chineseNameLabel">Chinese Name (å§“å):</span>
                   <span id="chineseNameStar" class="required-star hidden">*</span>
                </label> 
                <input type="text" id="chineseName" name="chineseName">
                <small id="chineseNameHelper" class="field-helper hidden" data-translate="chineseNameHelper"></small>
            </div>
            <div class="form-group">
                <label for="englishName">
                  <span class="label-text" data-translate="englishNameLabel">English Name:</span>
                  <span id="englishNameStar" class="required-star hidden">*</span>
                </label>
                <input type="text" id="englishName" name="englishName">
                <small id="englishNameHelper" class="field-helper hidden" data-translate="englishNameHelper"></small>
            </div>
            <div class="form-group">
                <label for="email" data-translate="emailLabel">Email (é›»å­éƒµä»¶): <span class="required-star">*</span></label>
                <input type="email" id="email" name="email">
            </div>
            <div class="form-group">
                <label data-translate="attendanceLabel">Will you be able to attend? <span class="required-star">*</span></label>
                <div class="radio-group">
                    <button class="choice-button" data-value="yes" name="attendance" data-translate="attendanceYes"></button>
                    <button class="choice-button" data-value="no" name="attendance" data-translate="attendanceNo"></button>
                </div>
                <input type="hidden" id="attendance" name="attendanceInput">
            </div>
            <div class="navigation-buttons">
                <button id="nextPage1" class="form-button" data-translate="nextButton"></button>
            </div>
        </div>

        <!-- Page 2: Guest Details (if attending) -->
        <div id="page2" class="form-page hidden">
            <h2 data-translate="page2Title">Accompanying Guests</h2>
            <p data-translate="page2Description">Please add details for each person attending with you.</p>
            <div id="guestListContainer">
                <!-- Guest entries will be added here -->
            </div>
            <div class="add-guest-button-container">
                <button id="addGuestBtn" class="form-button secondary" data-translate="addGuestButton"></button>
            </div>
            <hr>
            <div class="navigation-buttons">
                <button id="prevToPage1" class="form-button alternate" data-translate="prevButton"></button>
                <button id="nextPage2" class="form-button" data-translate="nextButton"></button>
            </div>
        </div>

        <!-- Page 3: Contact Preferences -->
        <div id="page3" class="form-page hidden">
            <h2 data-translate="page3Title">Contact Preferences</h2>
            <p data-translate="page3Description">How do you prefer we contact you for updates? (At least one method required)</p>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="contactMethod" value="phone">
                    <span data-translate="contactPhone">Phone (é›»è©±)</span>
                </label>
                <input type="text" id="contactPhoneInput" name="contactPhoneInput" class="contact-input hidden" placeholder-translate="contactPhonePlaceholder">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="contactMethod" value="email">
                    <span data-translate="contactEmail">Email (é›»å­éƒµä»¶)</span>
                </label>
                <input type="email" id="contactEmailInput" name="contactEmailInput" class="contact-input hidden" placeholder-translate="contactEmailPlaceholder">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="contactMethod" value="line">
                    <span data-translate="contactLine">LINE</span>
                </label>
                <input type="text" id="contactLineInput" name="contactLineInput" class="contact-input hidden" placeholder-translate="contactLinePlaceholder">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="contactMethod" value="whatsapp">
                    <span data-translate="contactWhatsapp">WhatsApp</span>
                </label>
                <input type="text" id="contactWhatsappInput" name="contactWhatsappInput" class="contact-input hidden" placeholder-translate="contactWhatsappPlaceholder">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="contactMethod" value="ig">
                    <span data-translate="contactIg">Instagram</span>
                </label>
                <input type="text" id="contactIgInput" name="contactIgInput" class="contact-input hidden" placeholder-translate="contactIgPlaceholder">
            </div>
             <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="contactMethod" value="facebook">
                    <span data-translate="contactFacebook">Facebook</span>
                </label>
                <input type="text" id="contactFacebookInput" name="contactFacebookInput" class="contact-input hidden" placeholder-translate="contactFacebookPlaceholder">
            </div>
            <div class="navigation-buttons">
                <button id="prevToPage2" class="form-button alternate" data-translate="prevButton"></button>
                <button id="nextPage3" class="form-button" data-translate="nextButton"></button>
            </div>
        </div>

        <!-- Final Page: Message & Submit / Thank You -->
        <div id="finalPage" class="form-page hidden">
            <div id="finalPageContent">
                <h2 data-translate="finalPageTitle">Final Step</h2>
                <div class="form-group">
                    <label for="message" data-translate="messageLabel">Any message for the couple?</label>
                    <textarea id="message" name="message" rows="4" placeholder-translate="messagePlaceholder"></textarea>
                </div>
                <div class="line-contact">
                    <p data-translate="lineInfo">You can also add us on LINE!</p>
                    <img src="https://placehold.co/150x150/f5f0e8/5d4037?text=LINE+QR" alt="LINE QR Code" id="lineQrCode" class="qr-code" onerror="this.onerror=null;this.src='https://placehold.co/150x150/f5f0e8/5d4037?text=QR+Error';">
                    <a href="YOUR_LINE_LINK_HERE" target="_blank" class="line-link" data-translate="lineLinkText">Click here to add us on LINE</a>
                </div>
                <div class="navigation-buttons">
                    <button id="submitRsvp" class="form-button" data-translate="submitRsvpButton"></button>
                </div>
                <div id="emailStatus" class="email-status-message"></div>
            </div>
            <div id="thankYouMessage" class="award-certificate hidden">
                 <h2 class="award-title" data-translate="thankYouTitle">Thank You!</h2>
                 <p class="award-text" data-translate="thankYouBody">Your response has been recorded. We look forward to celebrating with you (or will miss you)! A confirmation email has been sent.</p>
                 <img src="https://placehold.co/100x100/fffaf0/a1887f?text=Joy" alt="Thank You" class="award-logo" onerror="this.onerror=null;this.src='https://placehold.co/100x100/fffaf0/a1887f?text=Logo';">
                 <p class="save-the-date-text" data-translate="saveTheDate">Save the Date!</p>
            </div>
        </div>
    </div>

    <!-- Guest Entry Template (for Page 2) -->
    <template id="guestEntryTemplate">
        <div class="guest-entry">
            <button class="remove-guest-button hidden">&#128465;</button>
            <h3 data-translate="guestEntryTitle">Guest</h3>
            <div class="form-group">
                <label data-translate="guestNameLabel">Name (å§“å): <span class="required-star">*</span></label>
                <input type="text" name="guestName">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="isChild">
                    <span data-translate="isChildLabel">Is this guest a child? (æ˜¯å¦ç‚ºå…’ç«¥)</span>
                </label>
            </div>
            <div class="child-options hidden">
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="childSeat">
                        <span data-translate="childSeatLabel">Child Seat Needed? (éœ€è¦å…’ç«¥åº§æ¤…?)</span>
                    </label>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="childMeal">
                        <span data-translate="childMealLabel">Child Meal Needed? (éœ€è¦å…’ç«¥é¤?)</span>
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label data-translate="mealPreferenceLabel">Meal Preference (é£²é£Ÿåå¥½):</label>
                <select name="mealPreference">
                    <option value="standard" data-translate="mealStandard">Standard (æ¨™æº–)</option>
                    <option value="vegetarian" data-translate="mealVegetarian">Vegetarian (ç´ é£Ÿ)</option>
                </select>
            </div>
            <div class="form-group">
                <label data-translate="allergiesLabel">Any dietary restrictions or allergies? (é£²é£Ÿé™åˆ¶æˆ–éæ•):</label>
                <textarea name="allergies" rows="2" placeholder-translate="allergiesPlaceholder"></textarea>
            </div>
            <hr class="guest-divider">
        </div>
    </template>

    <!-- Validation Modal -->
    <div id="validationModalOverlay" class="modal-overlay hidden">
        <div class="modal-content-box">
            <p id="validationModalMessage" class="modal-message-text"></p>
            <!-- OK Button: Text is now set by the main setLanguage function via data-translate -->
            <button id="validationModalCloseButton" class="modal-button-confirm" data-translate="modalOkButton">OK</button>
        </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
